(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35409ab5"],{"0e4f":function(e,t,n){},3747:function(e,t,n){"use strict";var r=n("990b"),a=n.n(r);a.a},"6a87":function(e,t,n){"use strict";var r=n("0e4f"),a=n.n(r);a.a},"6e15":function(e,t,n){(function(t,n,r){e.exports=r()})(0,0,(function(){return function(t){if(/number|string|boolean/.test(typeof t))return t;if(t instanceof Date)return new Date(t.getTime());var n=t instanceof Array?[]:{};return r(t,n),n;function r(t,n){for(var a in t){var s=t[a];if(s instanceof Date){var i=new Date(s.getTime());e(n,a,i)}else if(s instanceof Function){i=s;e(n,a,i)}else if(s instanceof Array){i=[];var o=e(n,a,i);r(s,o)}else if(s instanceof Object){i={},o=e(n,a,i);r(s,o)}else{i=s;e(n,a,i)}}}};function e(e,t,n){return e instanceof Array?(e.push(n),e[e.length-1]):e instanceof Object?(e[t]=n,e[t]):void 0}}))},"7a3e":function(e,t,n){"use strict";t["a"]={data:function(){return{height:0,screenHeight:window.innerHeight}},created:function(){this.height=window.innerHeight-this.subHeight,window.addEventListener("resize",this.resize)},methods:{resize:function(){var e=this;return function(){e.screenHeight=window.innerHeight}()}},watch:{screenHeight:function(e){this.height=e-this.subHeight}},beforeDestroy:function(){window.removeEventListener("resize",this.resize)}}},"8d49":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n("2b0e"),a=r["default"].observable({avatarUrl:""});function s(e){a.avatarUrl=e}var i={setAvatar:s},o={_id:"",name:"",numberOfCasesHandled:[null,null,null,null,null,null,null,null,null,null,null,null,null]}},"990b":function(e,t,n){},a3aa:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"row-style":{background:"rgba(0, 0, 0, 0)"},"header-row-style":{background:"rgba(0, 0, 0, 0)"},"header-cell-style":{background:"rgba(0, 0, 0, 0)"},data:e.judges,height:e.height}},[n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{prop:"proportion",label:"分案比例"}}),n("el-table-column",{attrs:{prop:"address",label:"本轮剩余"}}),n("el-table-column",{attrs:{prop:"address",label:"本轮状态"}}),n("el-table-column",{attrs:{label:"本月分案数"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(e._f("numberOfCasesHandledFilter")(t.row.teams)))])]}}])}),n("el-table-column",{attrs:{label:"所属团队[办案数量]",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editIndex+1!==t.$index+1?n("el-tag",{attrs:{"disable-transitions":!0,size:"medium"}},[e._v(e._s(e._f("teamsFilter")(t.row.teams)))]):e._e(),n("transition",{attrs:{name:"el-zoom-in-center"}},[e.editIndex+1===t.$index+1?n("div",[n("el-form",{ref:"storeJudges",attrs:{model:{},rules:e.rules}},e._l(e.storeJudges.teams,(function(t,r){return n("div",{key:r,staticStyle:{display:"flex"}},[e.rules["team"+r][0].message?n("el-tag",{staticClass:"error-message",attrs:{type:"danger",effect:"plain",size:"medium",closable:""},on:{close:function(t){return e.closeTag(r)},click:function(t){return e.closeTag(r)}}},[e._v(e._s(e.rules["team"+r][0].message))]):e._e(),n("el-form-item",{attrs:{prop:"team"+r}},[n("el-input",{attrs:{placeholder:"初始办案数量",size:"mini"},on:{focus:function(t){return e.closeTag(r)}},model:{value:t.numberOfCasesHandled[0],callback:function(n){e.$set(t.numberOfCasesHandled,0,e._n(n))},expression:"team.numberOfCasesHandled[0]"}},[n("el-select",{attrs:{slot:"prepend",placeholder:"请选择",width:"100px",disabled:e.isEditable(t.numberOfCasesHandled)},on:{"visible-change":e.autoRemoveSelectedTeam},slot:"prepend",model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"team.name"}},e._l(e.storeTeams,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1)],1),n("i",{staticStyle:{"margin-left":"5px"}},[0===r?n("el-button",{attrs:{size:"mini"},on:{click:e.addTeam}},[e._v("添加")]):e._e(),0!==r?n("el-button",{attrs:{size:"mini",disabled:e.isEditable(t.numberOfCasesHandled)},on:{click:function(t){return t.preventDefault(),e.removeTeam(r)}}},[e._v("删除")]):e._e()],1)],1)})),0)],1):e._e()])]}}])}),n("el-table-column",{attrs:{prop:"address",label:"请假"}}),n("el-table-column",{attrs:{prop:"address",label:"回避"}}),n("el-table-column",{attrs:{prop:"address",label:"暂停"}}),n("el-table-column",{attrs:{prop:"address",label:"超额"}}),n("el-table-column",{attrs:{prop:"address",align:"right",width:"150"},scopedSlots:e._u([{key:"header",fn:function(){return[n("el-popover",{attrs:{trigger:"hover"}},[n("p",[e._v("提示：")]),n("p",[e._v("团队中一旦有成员，则禁止编辑或删除团队")]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(" 操作 "),n("i",{staticClass:"el-icon-question"})])])]},proxy:!0},{key:"default",fn:function(t){return[e.editIndex+1!==t.$index+1?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.editJudge(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e.editIndex+1!==t.$index+1?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e._deleteJudge(t.$index,t.row)}}},[e._v("删除")]):e._e(),e.editIndex+1===t.$index+1?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.submitForm(t.$index,t.row)}}},[e._v("保存")]):e._e(),e.editIndex+1===t.$index+1?n("el-button",{attrs:{size:"mini"},on:{click:e.cancel}},[e._v("取消")]):e._e()]}}])})],1)],1)},a=[],s=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("a434"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("e25e"),n("159b"),n("96cf"),n("89ba")),i=n("2fa7"),o=n("284c"),l=n("2f62"),u=n("7a3e"),c=n("6e15"),d=n.n(c),f=n("8d49");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"Table",mixins:[u["a"]],data:function(){var e=this,t=function(t,n,r){var a=parseInt(t.field.charAt(t.field.length-1)),s=!0,i="",o=e.storeJudges.teams[a].numberOfCasesHandled[0];""===e.storeJudges.teams[a].name&&(i="团队不能为空"),("number"!==typeof o||isNaN(o))&&(i&&(i+="    "),i+="初始办案数量必须为数字,如果没有则填0"),i&&(e.rules[t.field][0].message=i,e.$forceUpdate(),s=!1,r(new Error(i))),s&&r()};return{loading:!0,subHeight:246,editIndex:void 0,storeJudges:[],storeTeams:[],rules:{team:[{required:!0,validator:t,message:""}]}}},created:function(){this.storeTeams=Object(o["a"])(d()(this.teams))},computed:b({},Object(l["c"])(["judges","teams"])),watch:{judges:{handler:function(e){e.length&&(this.loading=!1)},immediate:!0},"storeJudges.teams":{handler:function(e){var t=this;e.forEach((function(e,n){var r=t.storeTeams.filter((function(t){return e.name===t.name}));r[0]&&(e._id=r[0]._id)}))},deep:!0}},filters:{teamsFilter:function(e){var t="";return e.forEach((function(e){var n=0;e.numberOfCasesHandled.forEach((function(e){e&&(n+=e)})),t+="".concat(e.name,"[").concat(n,"]、")})),t.substr(0,t.length-1)},numberOfCasesHandledFilter:function(e){var t=0;return e.forEach((function(e){e.numberOfCasesHandled.forEach((function(e){e&&(t+=e)}))})),t}},methods:b({},Object(l["b"])(["deleteJudge","updateJudge"]),{_deleteJudge:function(e,t){var n=t;this.deleteJudge({judge:n,index:e})},editJudge:function(e,t){var n=this;this.editIndex=e,this.storeJudges=d()(t),this.storeJudges.teams.forEach((function(e,t){n.rules["team".concat(t)]=Object(o["a"])(d()(n.rules.team))}))},submitForm:function(e,t){var n=this;this.$refs["storeJudges"].validate(function(){var r=Object(s["a"])(regeneratorRuntime.mark((function r(a){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=9;break}return s=n.storeJudges,r.next=4,n.updateJudge({judge:s,index:e});case 4:console.log(n.storeJudges),console.log(t),n.editIndex=void 0,r.next=11;break;case 9:return console.log("error submit!!"),r.abrupt("return",!1);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},cancel:function(){this.editIndex=void 0},addTeam:function(){var e=this.storeJudges.teams.length;e<4&&(this.storeJudges.teams.push(d()(f["c"])),this.rules["team".concat(e)]=Object(o["a"])(d()(this.rules.team)))},removeTeam:function(e){this.storeJudges.teams.length>1&&this.storeJudges.teams.splice(e,1)},autoRemoveSelectedTeam:function(){var e=this;this.storeTeams=this.teams.filter((function(t){var n=!0;return e.storeJudges.teams.forEach((function(e){e.name===t.name&&(n=!1)})),n}))},isEditable:function(e){var t=0;return e.forEach((function(e,n){0!==n&&(t+=e)})),0!==t},closeTag:function(e){this.rules["team".concat(e)][0].message="",this.$forceUpdate()},test:function(){}})},p=g,h=(n("3747"),n("6a87"),n("2877")),v=Object(h["a"])(p,r,a,!1,null,"75980424",null);t["default"]=v.exports},e25e:function(e,t,n){var r=n("23e7"),a=n("e583");r({global:!0,forced:parseInt!=a},{parseInt:a})},e583:function(e,t,n){var r=n("da84"),a=n("58a8").trim,s=n("5899"),i=r.parseInt,o=/^[+-]?0[Xx]/,l=8!==i(s+"08")||22!==i(s+"0x16");e.exports=l?function(e,t){var n=a(String(e));return i(n,t>>>0||(o.test(n)?16:10))}:i}}]);
//# sourceMappingURL=chunk-35409ab5.22645006.js.map