{"version":3,"sources":["webpack:///./node_modules/deep-copy/index.js","webpack:///./src/views/apages/pages.css?f7e7","webpack:///./src/views/mixins/autoHeight.js","webpack:///./src/views/apages/Manage/Judge/Table.vue?f439","webpack:///src/views/apages/Manage/Judge/Table.vue","webpack:///./src/views/apages/Manage/Judge/Table.vue?8c6a","webpack:///./src/views/apages/Manage/Judge/Table.vue?4772","webpack:///./src/views/apages/Manage/AddJudge/store.js","webpack:///./src/views/apages/Manage/Judge/Table.vue?c00c"],"names":["name","root","factory","module","exports","this","target","test","Date","getTime","copy","Array","walk","key","obj","value","add","Function","last","Object","push","length","data","height","screenHeight","window","innerHeight","created","subHeight","addEventListener","resize","methods","watch","val","beforeDestroy","removeEventListener","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","staticStyle","attrs","background","judges","scopedSlots","_u","fn","scope","_v","_s","_f","row","teams","editIndex","$index","_e","_l","storeJudges","team","index","style","model","numberOfCasesHandled","callback","$$v","$set","_n","isEditable","on","autoRemoveSelectedTeam","slot","addTeam","$event","preventDefault","removeTeam","staticClass","proxy","editJudge","_deleteJudge","cancel","staticRenderFns","mixins","autoHeight","loading","undefined","storeTeams","computed","handler","immediate","forEach","res","item","_id","deep","filters","teamsFilter","str","substr","numberOfCasesHandledFilter","num","sum","deleteJudge","len","splice","filter","isEqual","component","store","Vue","observable","avatarUrl","setAvatar","mutations"],"mappings":"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","file":"js/chunk-b42b04a6.184c9a71.js","sourcesContent":["\n;(function (name, root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory()\n  }\n  /* istanbul ignore next */\n  else if (typeof define === 'function' && define.amd) {\n    define(factory)\n  }\n  else {\n    root[name] = factory()\n  }\n}('dcopy', this, function () {\n  /**\n   * Deep copy objects and arrays\n   *\n   * @param {Object/Array} target\n   * @return {Object/Array} copy\n   * @api public\n   */\n\n  return function (target) {\n    if (/number|string|boolean/.test(typeof target)) {\n      return target\n    }\n    if (target instanceof Date) {\n      return new Date(target.getTime())\n    }\n\n    var copy = (target instanceof Array) ? [] : {}\n    walk(target, copy)\n    return copy\n\n    function walk (target, copy) {\n      for (var key in target) {\n        var obj = target[key]\n        if (obj instanceof Date) {\n          var value = new Date(obj.getTime())\n          add(copy, key, value)\n        }\n        else if (obj instanceof Function) {\n          var value = obj\n          add(copy, key, value)\n        }\n        else if (obj instanceof Array) {\n          var value = []\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else if (obj instanceof Object) {\n          var value = {}\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else {\n          var value = obj\n          add(copy, key, value)\n        }\n      }\n    }\n  }\n\n  /**\n   * Adds a value to the copy object based on its type\n   *\n   * @api private\n   */\n\n  function add (copy, key, value) {\n    if (copy instanceof Array) {\n      copy.push(value)\n      return copy[copy.length - 1]\n    }\n    else if (copy instanceof Object) {\n      copy[key] = value\n      return copy[key]\n    }\n  }\n}))\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./pages.css?vue&type=style&index=0&id=28f78583&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./pages.css?vue&type=style&index=0&id=28f78583&scoped=true&lang=css&\"","export default {\n  data() {\n    return {\n      height: 0,\n      screenHeight: window.innerHeight\n    }\n  },\n  created() {\n    this.height = window.innerHeight - this.subHeight\n    window.addEventListener('resize', this.resize)\n  },\n  methods: {\n    resize() {\n      return (() => {\n        this.screenHeight = window.innerHeight\n      })()\n    }\n  },\n  watch: {\n    screenHeight(val) {\n      this.height = val - this.subHeight\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.resize)\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"row-style\":{ background: 'rgba(0, 0, 0, 0)' },\"header-row-style\":{ background: 'rgba(0, 0, 0, 0)' },\"header-cell-style\":{ background: 'rgba(0, 0, 0, 0)' },\"data\":_vm.judges,\"height\":_vm.height}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"proportion\",\"label\":\"分案比例\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"本轮剩余\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"本轮状态\"}}),_c('el-table-column',{attrs:{\"label\":\"本月分案数\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',[_vm._v(_vm._s(_vm._f(\"numberOfCasesHandledFilter\")(scope.row.teams)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"所属团队[办案数量]\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.editIndex +1 !== scope.$index+1)?_c('el-tag',{attrs:{\"disable-transitions\":true,\"size\":\"medium\"}},[_vm._v(_vm._s(_vm._f(\"teamsFilter\")(scope.row.teams)))]):_vm._e(),_c('el-collapse-transition',[(_vm.editIndex +1 === scope.$index+1)?_c('div',_vm._l((_vm.storeJudges.teams),function(team,index){return _c('div',{key:index,staticStyle:{\"display\":\"flex\"}},[_c('el-input',{style:(index?'margin-top:3px':''),attrs:{\"placeholder\":\"初始办案数量\",\"size\":\"mini\"},model:{value:(team.numberOfCasesHandled[0]),callback:function ($$v) {_vm.$set(team.numberOfCasesHandled, 0, _vm._n($$v))},expression:\"team.numberOfCasesHandled[0]\"}},[_c('el-select',{attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择\",\"width\":\"100px\",\"disabled\":_vm.isEditable(team.numberOfCasesHandled)},on:{\"visible-change\":_vm.autoRemoveSelectedTeam},slot:\"prepend\",model:{value:(team.name),callback:function ($$v) {_vm.$set(team, \"name\", $$v)},expression:\"team.name\"}},_vm._l((_vm.storeTeams),function(team,index){return _c('el-option',{key:index,attrs:{\"label\":team.name,\"value\":team.name}})}),1)],1),_c('i',{staticStyle:{\"margin-left\":\"5px\"}},[(index === 0)?_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.addTeam}},[_vm._v(\"添加\")]):_vm._e(),(index !== 0)?_c('el-button',{staticStyle:{\"margin-top\":\"3px\"},attrs:{\"size\":\"mini\",\"disabled\":_vm.isEditable(team.numberOfCasesHandled)},on:{\"click\":function($event){$event.preventDefault();return _vm.removeTeam(index)}}},[_vm._v(\"删除\")]):_vm._e()],1)],1)}),0):_vm._e()])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"请假\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"回避\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"暂停\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"超额\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"align\":\"right\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('el-popover',{attrs:{\"trigger\":\"hover\"}},[_c('p',[_vm._v(\"提示：\")]),_c('p',[_vm._v(\"团队中一旦有成员，则禁止编辑或删除团队\")]),_c('div',{staticClass:\"name-wrapper\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\" 操作 \"),_c('i',{staticClass:\"el-icon-question\"})])])]},proxy:true},{key:\"default\",fn:function(scope){return [(_vm.editIndex+1 !== scope.$index+1 ? true : false)?_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editJudge(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]):_vm._e(),(_vm.editIndex+1 !== scope.$index+1 ? true : false)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm._deleteJudge(scope.$index, scope.row)}}},[_vm._v(\"删除\")]):_vm._e(),(_vm.editIndex+1 === scope.$index+1 ? true : false)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.test}},[_vm._v(\"保存\")]):_vm._e(),(_vm.editIndex+1 === scope.$index+1 ? true : false)?_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]):_vm._e()]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-table\n    :row-style=\"{ background: 'rgba(0, 0, 0, 0)' }\"\n    :header-row-style=\"{ background: 'rgba(0, 0, 0, 0)' }\"\n    :header-cell-style=\"{ background: 'rgba(0, 0, 0, 0)' }\"\n    :data=\"judges\"\n    :height=\"height\"\n    v-loading=\"loading\"\n    style=\"width: 100%\"\n  >\n    <el-table-column prop=\"name\" label=\"姓名\"></el-table-column>\n    <el-table-column prop=\"proportion\" label=\"分案比例\"></el-table-column>\n    <el-table-column prop=\"address\" label=\"本轮剩余\"></el-table-column>\n    <el-table-column prop=\"address\" label=\"本轮状态\"></el-table-column>\n    <el-table-column label=\"本月分案数\">\n      <template v-slot=\"scope\">\n        <p>{{scope.row.teams | numberOfCasesHandledFilter }}</p>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"所属团队[办案数量]\" width=\"300\">\n      <template v-slot=\"scope\">\n        <el-tag\n          :disable-transitions=\"true\"\n          size=\"medium\"\n          v-if=\"editIndex +1 !== scope.$index+1\"\n        >{{ scope.row.teams | teamsFilter }}</el-tag>\n        <!-- 编辑团队⬇⬇⬇ -->\n        <el-collapse-transition>\n          <div v-if=\"editIndex +1 === scope.$index+1\">\n            <div v-for=\"(team, index) in storeJudges.teams\" :key=\"index\" style=\"display:flex\">\n              <el-input\n                v-model.number=\"team.numberOfCasesHandled[0]\"\n                placeholder=\"初始办案数量\"\n                size=\"mini\"\n                :style=\"index?'margin-top:3px':''\"\n              >\n                <el-select\n                  v-model=\"team.name\"\n                  slot=\"prepend\"\n                  placeholder=\"请选择\"\n                  width=\"100px\"\n                  @visible-change=\"autoRemoveSelectedTeam\"\n                  :disabled=\"isEditable(team.numberOfCasesHandled)\"\n                >\n                  <el-option\n                    v-for=\"(team,index) in storeTeams\"\n                    :key=\"index\"\n                    :label=\"team.name\"\n                    :value=\"team.name\"\n                  ></el-option>\n                </el-select>\n              </el-input>\n              <i style=\"margin-left:5px\">\n                <el-button @click=\"addTeam\" v-if=\"index === 0\" size=\"mini\">添加</el-button>\n                <el-button\n                  @click.prevent=\"removeTeam(index)\"\n                  v-if=\"index !== 0\"\n                  style=\"margin-top:3px\"\n                  size=\"mini\"\n                  :disabled=\"isEditable(team.numberOfCasesHandled)\"\n                >删除</el-button>\n              </i>\n            </div>\n          </div>\n        </el-collapse-transition>\n        <!-- 编辑团队⬆⬆⬆ -->\n      </template>\n    </el-table-column>\n    <el-table-column prop=\"address\" label=\"请假\"></el-table-column>\n    <el-table-column prop=\"address\" label=\"回避\"></el-table-column>\n    <el-table-column prop=\"address\" label=\"暂停\"></el-table-column>\n    <el-table-column prop=\"address\" label=\"超额\"></el-table-column>\n    <el-table-column prop=\"address\" align=\"right\" width=\"150\">\n      <template v-slot:header>\n        <el-popover trigger=\"hover\">\n          <p>提示：</p>\n          <p>团队中一旦有成员，则禁止编辑或删除团队</p>\n          <div slot=\"reference\" class=\"name-wrapper\">\n            操作\n            <i class=\"el-icon-question\"></i>\n          </div>\n        </el-popover>\n      </template>\n      <template v-slot=\"scope\">\n        <el-button\n          v-if=\"editIndex+1 !== scope.$index+1 ? true : false\"\n          size=\"mini\"\n          @click=\"editJudge(scope.$index, scope.row)\"\n        >编辑</el-button>\n        <el-button\n          v-if=\"editIndex+1 !== scope.$index+1 ? true : false\"\n          size=\"mini\"\n          type=\"danger\"\n          @click=\"_deleteJudge(scope.$index, scope.row)\"\n        >删除</el-button>\n        <el-button\n          v-if=\"editIndex+1 === scope.$index+1 ? true : false\"\n          type=\"primary\"\n          size=\"mini\"\n          @click=\"test\"\n        >保存</el-button>\n        <el-button\n          v-if=\"editIndex+1 === scope.$index+1 ? true : false\"\n          size=\"mini\"\n          @click=\"cancel\"\n        >取消</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n</template>\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport autoHeight from '@/views/mixins/autoHeight'\nimport dcopy from 'deep-copy'\nimport { team } from '../AddJudge/store'\nexport default {\n  name: 'Table',\n  mixins: [autoHeight],\n  data () {\n    return {\n      loading: true,\n      subHeight: 190,\n      editIndex: undefined,\n      storeJudges: [],\n      storeTeams: []\n    }\n  },\n  created () {\n    this.storeTeams = dcopy(this.teams) // 在autoRemoveSelectedTeam 中还会刷新这个值\n  },\n  computed: {\n    ...mapGetters(['judges', 'teams'])\n  },\n  watch: {\n    judges: {\n      handler (val) {\n        if (val.length) {\n          this.loading = false\n        }\n      },\n      immediate: true\n    },\n    'storeJudges.teams': {\n      handler: function (val) {\n        val.forEach((item, index) => {\n          const res = this.storeTeams.filter(team => item.name === team.name)\n          if (res[0]) {\n            item._id = res[0]._id\n          }\n        })\n      },\n      deep: true\n    }\n  },\n  filters: {\n    teamsFilter: function (val) {\n      let str = ''\n      val.forEach(team => {\n        let sum = 0\n        team.numberOfCasesHandled.forEach(num => { if (num) { sum += num } })\n        str += `${team.name}[${sum}]、`\n      })\n      return str.substr(0, str.length - 1)\n    },\n    numberOfCasesHandledFilter (val) {\n      let sum = 0\n      val.forEach(team => {\n        team.numberOfCasesHandled.forEach(num => {\n          if (num) {\n            sum += num\n          }\n        })\n      })\n      return sum\n    }\n  },\n  methods: {\n    ...mapActions(['deleteJudge']),\n    _deleteJudge (index, row) {\n      const judge = row\n      this.deleteJudge({ judge, index })\n    },\n    editJudge (index, row) {\n      this.editIndex = index\n      this.storeJudges = dcopy(row) // 不能直接编辑vuex,所以点击编辑按钮的时候,保存当前行的法官信息,就可以在组件内编辑了。\n    },\n    cancel () {\n      this.editIndex = undefined\n    },\n    addTeam () {\n      const len = this.storeJudges.teams.length\n      if (len < 4) {\n        this.storeJudges.teams.push(dcopy(team))\n        // this.rules[`team${len}`] = this.rules.team0\n      }\n    },\n    removeTeam (index) {\n      // 这里有一个假设，每一个法官都至少属于一个团队，所以第一个团队是无法被删除的，也没有相应的删除按钮\n      if (this.storeJudges.teams.length > 1) {\n        this.storeJudges.teams.splice(index, 1)\n      }\n    },\n    autoRemoveSelectedTeam () {\n      // 这里仅仅是刷新弹窗中选项的数据\n      this.storeTeams = this.teams.filter((team) => {\n        let isEqual = true\n        this.storeJudges.teams.forEach(item => {\n          if (item.name === team.name) isEqual = false\n        })\n        return isEqual\n      })\n    },\n    isEditable (numberOfCasesHandled) {\n      // 团队办案数量分12个月，设置了13个月，第0个专门存放初始办案数量\n      // 初始办案数量是可以修改的\n      // 正常月份的办案数量不可更改（正常月份的办案数量是由案件信息列表自动统计出来的，所以不可更改）\n      // 此处是检查正常月份是否已经有办案数量，如果正常月份已经有办案数量则这个团队是不可以被修改的（但是仍然可以编辑初始办案数量）\n      // 初始办案数量任何时候都可以编辑\n      let sum = 0\n      numberOfCasesHandled.forEach((num, index) => {\n        if (index !== 0) { // 排除初始办案数量\n          sum += num\n        }\n      })\n      if (sum !== 0) {\n        return true\n      } else {\n        return false\n      }\n    },\n    test () {\n\n    }\n  }\n}\n</script>\n<style scoped src=\"@/views/apages/pages.css\">\n/** https://www.cnblogs.com/ajaxlu/p/9086651.html */\n</style>\n<style scoped>\n.el-select {\n  width: 150px;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Table.vue?vue&type=template&id=28f78583&scoped=true&\"\nimport script from \"./Table.vue?vue&type=script&lang=js&\"\nexport * from \"./Table.vue?vue&type=script&lang=js&\"\nimport style0 from \"@/views/apages/pages.css?vue&type=style&index=0&id=28f78583&scoped=true&lang=css&\"\nimport style1 from \"./Table.vue?vue&type=style&index=1&id=28f78583&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28f78583\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nexport const store = Vue.observable({ avatarUrl: '' })\n\nfunction setAvatar(avatarUrl) {\n  store.avatarUrl = avatarUrl\n}\nexport const mutations = { setAvatar }\n\nexport const team = {\n  _id: '',\n  name: '',\n  numberOfCasesHandled: [null, null, null, null, null, null, null, null, null, null, null, null, null]\n}\n// 团队办案数量分12个月，设置了13个月，第0个专门存放初始办案数量\n// 初始办案数量是可以修改的\n// 正常月份的办案数量不可更改（正常月份的办案数量是由案件信息列表自动统计出来的，所以不可更改）\n// 此处是检查正常月份是否已经有办案数量，如果正常月份已经有办案数量则这个团队是不可以被修改的（但是仍然可以编辑初始办案数量）\n// 初始办案数量任何时候都可以编辑\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=1&id=28f78583&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=1&id=28f78583&scoped=true&lang=css&\""],"sourceRoot":""}