(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8eab8e56"],{"02a8":function(e,t,n){"use strict";var r=n("9d03"),i=n.n(r);i.a},"15c1":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{attrs:{"row-style":{background:"rgba(0, 0, 0, 0)"},"header-row-style":{background:"rgba(0, 0, 0, 0)"},"header-cell-style":{background:"rgba(0, 0, 0, 0)"},data:e.teams,height:e.height}},[n("el-table-column",{attrs:{label:"团队名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{on:{dblclick:function(n){return e.editTeam(t.$index,t.row,n)}}},[e.editIndex+1!==t.$index+1?n("i",{staticClass:"ico icon-tuandui"}):e._e(),e.editIndex+1!==t.$index+1?n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))]):e._e()]),e.editIndex+1===t.$index+1?n("el-input",{class:e.prompt?"prompt":"",attrs:{size:"mini","prefix-icon":"ico icon-tuandui",placeholder:t.row.name},on:{focus:function(n){return e.clearDuplicate(t.row.name)}},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e._updateTeam(t.$index,t.row,n)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}):e._e()]}}])}),n("el-table-column",{attrs:{label:"团队成员"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top",width:"280"}},[n("p",[e._v("团队: "+e._s(t.row.name))]),n("p",[e._v("成员: "+e._s(e._f("membersPopover")(t.row.members)))]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{size:"medium"}},[e._v(e._s(e._f("members")(t.row.members)))])],1)])]}}])}),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[n("el-popover",{attrs:{trigger:"hover"}},[n("p",[e._v("提示：")]),n("p",[e._v("团队中一旦有成员，则禁止编辑或删除团队")]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(" 操作 "),n("i",{staticClass:"el-icon-question"})])])]},proxy:!0},{key:"default",fn:function(t){return[e.editIndex+1!==t.$index+1?n("el-button",{attrs:{size:"mini",disabled:!!t.row.members.length},on:{click:function(n){return e.editTeam(t.$index,t.row,n)}}},[e._v("编辑")]):e._e(),e.editIndex+1!==t.$index+1?n("el-button",{attrs:{size:"mini",type:"danger",disabled:!!t.row.members.length},on:{click:function(n){return e._deleteTeam(t.$index,t.row)}}},[e._v("删除")]):e._e(),e.editIndex+1===t.$index+1?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e._updateTeam(t.$index,t.row,n)}}},[e._v("保存")]):e._e(),e.editIndex+1===t.$index+1?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.cancel(t.$index,t.row)}}},[e._v("取消")]):e._e()]}}])})],1)],1)},i=[],a=(n("a4d3"),n("4de4"),n("4160"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("96cf"),n("89ba")),o=n("2fa7"),c=n("2f62"),s=n("6e15"),u=n.n(s),d=n("7a3e");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"Table",mixins:[d["a"]],data:function(){return{subHeight:407,editIndex:void 0,prompt:!1,name:"",duplicate:""}},computed:f({},Object(c["c"])(["teams"]),{text:{get:function(){return this.duplicate?this.duplicate:this.name},set:function(e){this.name=e}}}),filters:{members:function(e){var t="";return e.length?(e.forEach((function(e){t+="".concat(e.name,"、")})),t.substr(0,t.length-1)):(t="~~团中没有成员~~",t)},membersPopover:function(e){var t="";return e.length?(e.forEach((function(e){t+="".concat(e.name,"、")})),t.substr(0,t.length-1)):(t="~~团中没有成员~~",t)}},mounted:function(){var e=this;this.$nextTick((function(){document.addEventListener("click",e.cancel)}))},beforeDestroy:function(){document.removeEventListener("click",this.cancel)},methods:f({},Object(c["b"])(["deleteTeam","updateTeam"]),{editTeam:function(e,t,n){n.stopPropagation(),this.editIndex=e,this.name=""},_deleteTeam:function(e,t){var n={_id:t._id};this.deleteTeam({_id:n,index:e})},_updateTeam:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.stopPropagation(),""!==this.name){e.next=4;break}return this.editIndex=void 0,e.abrupt("return");case 4:if(!this.duplicate){e.next=6;break}return e.abrupt("return");case 6:return i=u()(n),i.name=this.name,e.prev=8,e.next=11,this["updateTeam"]({team:i,index:t});case 11:a=e.sent,a.data&&(this.editIndex=void 0),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](8),this.prompt=!0,this.duplicate=e.t0.message;case 19:case"end":return e.stop()}}),e,this,[[8,15]])})));function t(t,n,r){return e.apply(this,arguments)}return t}(),clearDuplicate:function(e){this.duplicate="",this.text=e,this.prompt=!1},cancel:function(e){e.target&&"el-input__inner"===e.target.className||(this.editIndex=void 0,this.duplicate="",this.prompt=!1)}})},m=p,h=(n("02a8"),n("2877")),b=Object(h["a"])(m,r,i,!1,null,"7b2e7109",null);t["default"]=b.exports},"6e15":function(e,t,n){(function(t,n,r){e.exports=r()})(0,0,(function(){return function(t){if(/number|string|boolean/.test(typeof t))return t;if(t instanceof Date)return new Date(t.getTime());var n=t instanceof Array?[]:{};return r(t,n),n;function r(t,n){for(var i in t){var a=t[i];if(a instanceof Date){var o=new Date(a.getTime());e(n,i,o)}else if(a instanceof Function){o=a;e(n,i,o)}else if(a instanceof Array){o=[];var c=e(n,i,o);r(a,c)}else if(a instanceof Object){o={},c=e(n,i,o);r(a,c)}else{o=a;e(n,i,o)}}}};function e(e,t,n){return e instanceof Array?(e.push(n),e[e.length-1]):e instanceof Object?(e[t]=n,e[t]):void 0}}))},"7a3e":function(e,t,n){"use strict";t["a"]={data:function(){return{height:0,screenHeight:window.innerHeight}},created:function(){this.height=window.innerHeight-this.subHeight,window.addEventListener("resize",this.resize)},methods:{resize:function(){var e=this;return function(){e.screenHeight=window.innerHeight}()}},watch:{screenHeight:function(e){this.height=e-this.subHeight}},beforeDestroy:function(){window.removeEventListener("resize",this.resize)}}},"9d03":function(e,t,n){}}]);
//# sourceMappingURL=chunk-8eab8e56.c0243048.js.map