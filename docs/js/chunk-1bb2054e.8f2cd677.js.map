{"version":3,"sources":["webpack:///./node_modules/deep-copy/index.js","webpack:///./src/views/mixins/autoHeight.js","webpack:///./src/views/apages/Manage/Team/Table.vue?9fb5","webpack:///./src/views/apages/Manage/Team/Table.vue?1a16","webpack:///src/views/apages/Manage/Team/Table.vue","webpack:///./src/views/apages/Manage/Team/Table.vue?09e9","webpack:///./src/views/apages/Manage/Team/Table.vue?b248"],"names":["name","root","factory","module","exports","this","target","test","Date","getTime","copy","Array","walk","key","obj","value","add","Function","last","Object","push","length","data","height","screenHeight","window","innerHeight","created","subHeight","addEventListener","resize","methods","watch","val","beforeDestroy","removeEventListener","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","attrs","background","teams","scopedSlots","_u","fn","scope","on","$event","editTeam","$index","row","editIndex","staticClass","_e","staticStyle","_v","_s","class","prompt","clearDuplicate","nativeOn","type","indexOf","_k","keyCode","_updateTeam","model","callback","$$v","text","_f","members","slot","proxy","_deleteTeam","cancel","staticRenderFns","mixins","autoHeight","loading","undefined","duplicate","computed","get","set","handler","immediate","filters","forEach","str","substr","membersPopover","mounted","$nextTick","document","event","stopPropagation","index","deleteTeam","e","className","component"],"mappings":"+HACE,SAAUA,EAAMC,EAAMC,GAEpBC,EAAOC,QAAUF,KAFpB,CAWC,EAASG,GAAM,WASf,OAAO,SAAUC,GACf,GAAI,wBAAwBC,YAAYD,GACtC,OAAOA,EAET,GAAIA,aAAkBE,KACpB,OAAO,IAAIA,KAAKF,EAAOG,WAGzB,IAAIC,EAAQJ,aAAkBK,MAAS,GAAK,GAE5C,OADAC,EAAKN,EAAQI,GACNA,EAEP,SAASE,EAAMN,EAAQI,GACrB,IAAK,IAAIG,KAAOP,EAAQ,CACtB,IAAIQ,EAAMR,EAAOO,GACjB,GAAIC,aAAeN,KAAM,CACvB,IAAIO,EAAQ,IAAIP,KAAKM,EAAIL,WACzBO,EAAIN,EAAMG,EAAKE,QAEZ,GAAID,aAAeG,SAAU,CAC5BF,EAAQD,EACZE,EAAIN,EAAMG,EAAKE,QAEZ,GAAID,aAAeH,MAAO,CACzBI,EAAQ,GAAZ,IACIG,EAAOF,EAAIN,EAAMG,EAAKE,GAC1BH,EAAKE,EAAKI,QAEP,GAAIJ,aAAeK,OAAQ,CAC1BJ,EAAQ,GACRG,EAAOF,EAAIN,EAAMG,EAAKE,GAC1BH,EAAKE,EAAKI,OAEP,CACCH,EAAQD,EACZE,EAAIN,EAAMG,EAAKE,OAYvB,SAASC,EAAKN,EAAMG,EAAKE,GACvB,OAAIL,aAAgBC,OAClBD,EAAKU,KAAKL,GACHL,EAAKA,EAAKW,OAAS,IAEnBX,aAAgBS,QACvBT,EAAKG,GAAOE,EACLL,EAAKG,SAFT,O,oCCzEM,QACbS,KADa,WAEX,MAAO,CACLC,OAAQ,EACRC,aAAcC,OAAOC,cAGzBC,QAPa,WAQXtB,KAAKkB,OAASE,OAAOC,YAAcrB,KAAKuB,UACxCH,OAAOI,iBAAiB,SAAUxB,KAAKyB,SAEzCC,QAAS,CACPD,OADO,WACE,WACP,OAAQ,WACN,EAAKN,aAAeC,OAAOC,YADrB,KAKZM,MAAO,CACLR,aADK,SACQS,GACX5B,KAAKkB,OAASU,EAAM5B,KAAKuB,YAG7BM,cAvBa,WAwBXT,OAAOU,oBAAoB,SAAU9B,KAAKyB,W,kCCxB9C,yBAA0hB,EAAG,G,yCCA7hB,IAAIM,EAAS,WAAa,IAAIC,EAAIhC,KAASiC,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,WAAW,CAACE,WAAW,CAAC,CAAC1C,KAAK,UAAU2C,QAAQ,YAAY5B,MAAOsB,EAAW,QAAEO,WAAW,YAAYC,MAAM,CAAC,YAAY,CAAEC,WAAY,oBAAqB,mBAAmB,CAAEA,WAAY,oBAAqB,oBAAoB,CAAEA,WAAY,oBAAqB,KAAOT,EAAIU,MAAM,OAASV,EAAId,SAAS,CAACiB,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,QAAQG,YAAYX,EAAIY,GAAG,CAAC,CAACpC,IAAI,UAAUqC,GAAG,SAASC,GAAO,MAAO,CAACX,EAAG,MAAM,CAACY,GAAG,CAAC,SAAW,SAASC,GAAQ,OAAOhB,EAAIiB,SAASH,EAAMI,OAAQJ,EAAMK,IAAKH,MAAW,CAAEhB,EAAIoB,UAAU,IAAMN,EAAMI,OAAO,EAAmBf,EAAG,IAAI,CAACkB,YAAY,qBAAqBrB,EAAIsB,KAAMtB,EAAIoB,UAAU,IAAMN,EAAMI,OAAO,EAAmBf,EAAG,OAAO,CAACoB,YAAY,CAAC,cAAc,SAAS,CAACvB,EAAIwB,GAAGxB,EAAIyB,GAAGX,EAAMK,IAAIxD,SAASqC,EAAIsB,OAAQtB,EAAIoB,UAAU,IAAMN,EAAMI,OAAO,EAAmBf,EAAG,WAAW,CAACuB,MAAM1B,EAAI2B,OAAQ,SAAU,GAAGnB,MAAM,CAAC,KAAO,OAAO,cAAc,mBAAmB,YAAcM,EAAMK,IAAIxD,MAAMoD,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAI4B,eAAed,EAAMK,IAAIxD,QAAQkE,SAAS,CAAC,MAAQ,SAASb,GAAQ,OAAIA,EAAOc,KAAKC,QAAQ,QAAQ/B,EAAIgC,GAAGhB,EAAOiB,QAAQ,QAAQ,GAAGjB,EAAOxC,IAAI,SAAkB,KAAcwB,EAAIkC,YAAYpB,EAAMI,OAAQJ,EAAMK,IAAIH,KAAUmB,MAAM,CAACzD,MAAOsB,EAAQ,KAAEoC,SAAS,SAAUC,GAAMrC,EAAIsC,KAAKD,GAAK9B,WAAW,UAAUP,EAAIsB,YAAYnB,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,QAAQG,YAAYX,EAAIY,GAAG,CAAC,CAACpC,IAAI,UAAUqC,GAAG,SAASC,GAAO,MAAO,CAACX,EAAG,aAAa,CAACK,MAAM,CAAC,QAAU,QAAQ,UAAY,MAAM,MAAQ,QAAQ,CAACL,EAAG,IAAI,CAACH,EAAIwB,GAAG,OAAOxB,EAAIyB,GAAGX,EAAMK,IAAIxD,SAASwC,EAAG,IAAI,CAACH,EAAIwB,GAAG,OAAOxB,EAAIyB,GAAGzB,EAAIuC,GAAG,iBAAPvC,CAAyBc,EAAMK,IAAIqB,aAAarC,EAAG,MAAM,CAACkB,YAAY,eAAeb,MAAM,CAAC,KAAO,aAAaiC,KAAK,aAAa,CAACtC,EAAG,SAAS,CAACK,MAAM,CAAC,KAAO,WAAW,CAACR,EAAIwB,GAAGxB,EAAIyB,GAAGzB,EAAIuC,GAAG,UAAPvC,CAAkBc,EAAMK,IAAIqB,cAAc,YAAYrC,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,SAASG,YAAYX,EAAIY,GAAG,CAAC,CAACpC,IAAI,SAASqC,GAAG,WAAW,MAAO,CAACV,EAAG,aAAa,CAACK,MAAM,CAAC,QAAU,UAAU,CAACL,EAAG,IAAI,CAACH,EAAIwB,GAAG,SAASrB,EAAG,IAAI,CAACH,EAAIwB,GAAG,yBAAyBrB,EAAG,MAAM,CAACkB,YAAY,eAAeb,MAAM,CAAC,KAAO,aAAaiC,KAAK,aAAa,CAACzC,EAAIwB,GAAG,QAAQrB,EAAG,IAAI,CAACkB,YAAY,2BAA2BqB,OAAM,GAAM,CAAClE,IAAI,UAAUqC,GAAG,SAASC,GAAO,MAAO,CAAEd,EAAIoB,UAAU,IAAMN,EAAMI,OAAO,EAAkBf,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,OAAO,WAAWM,EAAMK,IAAIqB,QAAQxD,QAAqB+B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIiB,SAASH,EAAMI,OAAQJ,EAAMK,IAAKH,MAAW,CAAChB,EAAIwB,GAAG,QAAQxB,EAAIsB,KAAMtB,EAAIoB,UAAU,IAAMN,EAAMI,OAAO,EAAkBf,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,OAAO,KAAO,SAAS,WAAWM,EAAMK,IAAIqB,QAAQxD,QAAsB+B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAI2C,YAAY7B,EAAMI,OAAQJ,EAAMK,QAAQ,CAACnB,EAAIwB,GAAG,QAAQxB,EAAIsB,KAAMtB,EAAIoB,UAAU,IAAMN,EAAMI,OAAO,EAAkBf,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,OAAO,KAAO,WAAWO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIkC,YAAYpB,EAAMI,OAAQJ,EAAMK,IAAKH,MAAW,CAAChB,EAAIwB,GAAG,QAAQxB,EAAIsB,KAAMtB,EAAIoB,UAAU,IAAMN,EAAMI,OAAO,EAAiBf,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,QAAQO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAI4C,OAAO9B,EAAMI,OAAQJ,EAAMK,QAAQ,CAACnB,EAAIwB,GAAG,QAAQxB,EAAIsB,aAAa,IAAI,IACtrGuB,EAAkB,G,6tBCsFtB,OACElF,KAAM,QACNmF,OAAQ,CAACC,EAAX,MACE9D,KAHF,WAII,MAAO,CACL+D,SAAS,EACTzD,UAAW,IACX6B,eAAW6B,EACXtB,QAAQ,EACRhE,KAAM,GACNuF,UAAW,KAGfC,SAAU,EAAZ,GACA,0BADA,CAEIb,KAAM,CACJc,IADN,WAEQ,OAAIpF,KAAKkF,UAAjB,eACiBlF,KAAKL,MAGhB0F,IANN,SAMA,GACQrF,KAAKL,KAAOe,MAIlBiB,MAAO,CACLe,MAAO,CACL4C,QADN,SACA,GACY1D,EAAIZ,SACNhB,KAAKgF,SAAU,IAGnBO,WAAW,IAGfC,QAAS,CACPhB,QADJ,SACA,GACM,IAAN,KACM,OAAK5C,EAAIZ,QAKTY,EAAI6D,SAAQ,SAAlB,+BACaC,EAAIC,OAAO,EAAGD,EAAI1E,OAAS,KALhC0E,EAAM,aACCA,IAMXE,eAXJ,SAWA,GACM,IAAN,KACM,OAAKhE,EAAIZ,QAITY,EAAI6D,SAAQ,SAAlB,+BACaC,EAAIC,OAAO,EAAGD,EAAI1E,OAAS,KAJhC0E,EAAM,aACCA,KAMbG,QAzDF,WAyDA,WACI7F,KAAK8F,WAAU,WACbC,SAASvE,iBAAiB,QAAS,EAAzC,YAGEK,cA9DF,WA+DIkE,SAASjE,oBAAoB,QAAS9B,KAAK4E,SAE7ClD,QAAS,EAAX,GACA,gBACA,aACA,eAHA,CAKIuB,SALJ,SAKA,OACM+C,EAAMC,kBACNjG,KAAKoD,UAAY8C,EACjBlG,KAAKL,KAAO,IAEdgF,YAVJ,SAUA,KACM,IAAN,cACM3E,KAAKmG,WAAW,CAAtB,iBAEI,YAdJ,oEAcA,OAdA,4FAeA,oBACA,eAhBA,uBAiBA,sBAjBA,8BAoBA,eApBA,wDAqBA,SACA,iBAtBA,mBAwBA,qCAxBA,QAwBA,EAxBA,OAyBA,SACA,uBA1BA,qDA6BA,eACA,4BA9BA,uHAiCIvC,eAjCJ,SAiCA,GACM5D,KAAKkF,UAAY,GACjBlF,KAAKsE,KAAO3E,EACZK,KAAK2D,QAAS,GAGhBiB,OAvCJ,SAuCA,GACUwB,EAAEnG,QAAiC,oBAAvBmG,EAAEnG,OAAOoG,YACzBrG,KAAKoD,eAAY6B,EACjBjF,KAAKkF,UAAY,GACjBlF,KAAK2D,QAAS,OCnMwW,I,wBCQxX2C,EAAY,eACd,EACAvE,EACA8C,GACA,EACA,KACA,WACA,MAIa,aAAAyB,E","file":"js/chunk-1bb2054e.8f2cd677.js","sourcesContent":["\n;(function (name, root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory()\n  }\n  /* istanbul ignore next */\n  else if (typeof define === 'function' && define.amd) {\n    define(factory)\n  }\n  else {\n    root[name] = factory()\n  }\n}('dcopy', this, function () {\n  /**\n   * Deep copy objects and arrays\n   *\n   * @param {Object/Array} target\n   * @return {Object/Array} copy\n   * @api public\n   */\n\n  return function (target) {\n    if (/number|string|boolean/.test(typeof target)) {\n      return target\n    }\n    if (target instanceof Date) {\n      return new Date(target.getTime())\n    }\n\n    var copy = (target instanceof Array) ? [] : {}\n    walk(target, copy)\n    return copy\n\n    function walk (target, copy) {\n      for (var key in target) {\n        var obj = target[key]\n        if (obj instanceof Date) {\n          var value = new Date(obj.getTime())\n          add(copy, key, value)\n        }\n        else if (obj instanceof Function) {\n          var value = obj\n          add(copy, key, value)\n        }\n        else if (obj instanceof Array) {\n          var value = []\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else if (obj instanceof Object) {\n          var value = {}\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else {\n          var value = obj\n          add(copy, key, value)\n        }\n      }\n    }\n  }\n\n  /**\n   * Adds a value to the copy object based on its type\n   *\n   * @api private\n   */\n\n  function add (copy, key, value) {\n    if (copy instanceof Array) {\n      copy.push(value)\n      return copy[copy.length - 1]\n    }\n    else if (copy instanceof Object) {\n      copy[key] = value\n      return copy[key]\n    }\n  }\n}))\n","export default {\n  data() {\n    return {\n      height: 0,\n      screenHeight: window.innerHeight\n    }\n  },\n  created() {\n    this.height = window.innerHeight - this.subHeight\n    window.addEventListener('resize', this.resize)\n  },\n  methods: {\n    resize() {\n      return (() => {\n        this.screenHeight = window.innerHeight\n      })()\n    }\n  },\n  watch: {\n    screenHeight(val) {\n      this.height = val - this.subHeight\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.resize)\n  }\n}\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&id=394f7f60&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=style&index=0&id=394f7f60&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"row-style\":{ background: 'rgba(0, 0, 0, 0)' },\"header-row-style\":{ background: 'rgba(0, 0, 0, 0)' },\"header-cell-style\":{ background: 'rgba(0, 0, 0, 0)' },\"data\":_vm.teams,\"height\":_vm.height}},[_c('el-table-column',{attrs:{\"label\":\"团队名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"dblclick\":function($event){return _vm.editTeam(scope.$index, scope.row ,$event)}}},[(_vm.editIndex+1 === scope.$index+1 ? false : true )?_c('i',{staticClass:\"ico icon-tuandui\"}):_vm._e(),(_vm.editIndex+1 === scope.$index+1 ? false : true )?_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.name))]):_vm._e()]),(_vm.editIndex+1 === scope.$index+1 ? true : false )?_c('el-input',{class:_vm.prompt? 'prompt': '',attrs:{\"size\":\"mini\",\"prefix-icon\":\"ico icon-tuandui\",\"placeholder\":scope.row.name},on:{\"focus\":function($event){return _vm.clearDuplicate(scope.row.name)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm._updateTeam(scope.$index, scope.row,$event)}},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"团队成员\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-popover',{attrs:{\"trigger\":\"hover\",\"placement\":\"top\",\"width\":\"280\"}},[_c('p',[_vm._v(\"团队: \"+_vm._s(scope.row.name))]),_c('p',[_vm._v(\"成员: \"+_vm._s(_vm._f(\"membersPopover\")(scope.row.members)))]),_c('div',{staticClass:\"name-wrapper\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('el-tag',{attrs:{\"size\":\"medium\"}},[_vm._v(_vm._s(_vm._f(\"members\")(scope.row.members)))])],1)])]}}])}),_c('el-table-column',{attrs:{\"align\":\"right\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('el-popover',{attrs:{\"trigger\":\"hover\"}},[_c('p',[_vm._v(\"提示：\")]),_c('p',[_vm._v(\"团队中一旦有成员，则禁止编辑或删除团队\")]),_c('div',{staticClass:\"name-wrapper\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\" 操作 \"),_c('i',{staticClass:\"el-icon-question\"})])])]},proxy:true},{key:\"default\",fn:function(scope){return [(_vm.editIndex+1 !== scope.$index+1 ? true: false )?_c('el-button',{attrs:{\"size\":\"mini\",\"disabled\":scope.row.members.length? true: false},on:{\"click\":function($event){return _vm.editTeam(scope.$index, scope.row, $event)}}},[_vm._v(\"编辑\")]):_vm._e(),(_vm.editIndex+1 !== scope.$index+1 ? true: false )?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"disabled\":scope.row.members.length ? true: false},on:{\"click\":function($event){return _vm._deleteTeam(scope.$index, scope.row)}}},[_vm._v(\"删除\")]):_vm._e(),(_vm.editIndex+1 === scope.$index+1 ? true: false )?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm._updateTeam(scope.$index, scope.row, $event)}}},[_vm._v(\"保存\")]):_vm._e(),(_vm.editIndex+1 === scope.$index+1 ? true: false)?_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.cancel(scope.$index, scope.row)}}},[_vm._v(\"取消\")]):_vm._e()]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-table\n      :row-style=\"{ background: 'rgba(0, 0, 0, 0)' }\"\n      :header-row-style=\"{ background: 'rgba(0, 0, 0, 0)' }\"\n      :header-cell-style=\"{ background: 'rgba(0, 0, 0, 0)' }\"\n      v-loading=\"loading\"\n      :data=\"teams\"\n      :height=\"height\"\n    >\n      <el-table-column label=\"团队名称\">\n        <template v-slot=\"scope\">\n          <div @dblclick=\"editTeam(scope.$index, scope.row ,$event)\">\n            <i v-if=\"editIndex+1 === scope.$index+1 ? false : true \" class=\"ico icon-tuandui\"></i>\n            <span\n              v-if=\"editIndex+1 === scope.$index+1 ? false : true \"\n              style=\"margin-left: 10px\"\n            >{{ scope.row.name }}</span>\n          </div>\n          <el-input\n            v-if=\"editIndex+1 === scope.$index+1 ? true : false \"\n            size=\"mini\"\n            prefix-icon=\"ico icon-tuandui\"\n            :placeholder=\"scope.row.name\"\n            v-model=\"text\"\n            :class=\"prompt? 'prompt': ''\"\n            @focus=\"clearDuplicate(scope.row.name)\"\n            @keyup.enter.native=\"_updateTeam(scope.$index, scope.row,$event)\"\n          ></el-input>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"团队成员\">\n        <template v-slot=\"scope\">\n          <el-popover trigger=\"hover\" placement=\"top\" width=\"280\">\n            <p>团队: {{ scope.row.name }}</p>\n            <p>成员: {{ scope.row.members | membersPopover }}</p>\n            <div slot=\"reference\" class=\"name-wrapper\">\n              <el-tag size=\"medium\">{{ scope.row.members | members }}</el-tag>\n            </div>\n          </el-popover>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"right\">\n        <template v-slot:header>\n          <el-popover trigger=\"hover\">\n            <p>提示：</p>\n            <p>团队中一旦有成员，则禁止编辑或删除团队</p>\n            <div slot=\"reference\" class=\"name-wrapper\">\n              操作\n              <i class=\"el-icon-question\"></i>\n            </div>\n          </el-popover>\n        </template>\n        <template v-slot=\"scope\">\n          <el-button\n            v-if=\"editIndex+1 !== scope.$index+1 ? true: false \"\n            size=\"mini\"\n            @click=\"editTeam(scope.$index, scope.row, $event)\"\n            :disabled=\"scope.row.members.length? true: false\"\n          >编辑</el-button>\n          <el-button\n            v-if=\"editIndex+1 !== scope.$index+1 ? true: false \"\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"_deleteTeam(scope.$index, scope.row)\"\n            :disabled=\"scope.row.members.length ? true: false\"\n          >删除</el-button>\n          <el-button\n            v-if=\"editIndex+1 === scope.$index+1 ? true: false \"\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"_updateTeam(scope.$index, scope.row, $event)\"\n          >保存</el-button>\n          <el-button\n            v-if=\"editIndex+1 === scope.$index+1 ? true: false\"\n            size=\"mini\"\n            @click=\"cancel(scope.$index, scope.row)\"\n          >取消</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport dcopy from 'deep-copy'\nimport autoHeight from '@/views/mixins/autoHeight'\nexport default {\n  name: 'Table',\n  mixins: [autoHeight],\n  data () {\n    return {\n      loading: true,\n      subHeight: 400, // mixins/autoHeight 自定义参数\n      editIndex: undefined,\n      prompt: false, // 编辑输入框错误提示（边框颜色改变）\n      name: '',\n      duplicate: ''\n    }\n  },\n  computed: {\n    ...mapGetters(['teams']),\n    text: {\n      get () {\n        if (this.duplicate) { return this.duplicate } else {\n          return this.name\n        }\n      },\n      set (value) {\n        this.name = value\n      }\n    }\n  },\n  watch: {\n    teams: {\n      handler (val) {\n        if (val.length) {\n          this.loading = false\n        }\n      },\n      immediate: true\n    }\n  },\n  filters: {\n    members (val) {\n      let str = ''\n      if (!val.length) {\n        str = '~~团中没有成员~~'\n        return str\n      }\n\n      val.forEach(item => { str += `${item.name}、` })\n      return str.substr(0, str.length - 1)\n    },\n    membersPopover (val) {\n      let str = ''\n      if (!val.length) {\n        str = '~~团中没有成员~~'\n        return str\n      }\n      val.forEach(item => { str += `${item.name}、` })\n      return str.substr(0, str.length - 1)\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      document.addEventListener('click', this.cancel)\n    })\n  },\n  beforeDestroy () {\n    document.removeEventListener('click', this.cancel)\n  },\n  methods: {\n    ...mapActions([\n      'deleteTeam',\n      'updateTeam'\n    ]),\n    editTeam (index, row, event) {\n      event.stopPropagation()\n      this.editIndex = index\n      this.name = ''\n    },\n    _deleteTeam (index, row) {\n      const _id = { _id: row._id }\n      this.deleteTeam({ _id, index })\n    },\n    async _updateTeam (index, row, event) {\n      event.stopPropagation()\n      if (this.name === '') {\n        this.editIndex = undefined\n        return\n      }\n      if (this.duplicate) return\n      const team = dcopy(row)\n      team.name = this.name\n      try {\n        const res = await this['updateTeam']({ team, index })\n        if (res.data) {\n          this.editIndex = undefined\n        }\n      } catch (err) {\n        this.prompt = true\n        this.duplicate = err.message\n      }\n    },\n    clearDuplicate (name) {\n      this.duplicate = ''\n      this.text = name\n      this.prompt = false\n    },\n    // 点击输入框以外的区域隐藏输入框\n    cancel (e) {\n      if (e.target && e.target.className === 'el-input__inner') return\n      this.editIndex = undefined\n      this.duplicate = '' // 重复提示\n      this.prompt = false // ⚠️警告色不显示\n    }\n  }\n}\n</script>\n<style scoped>\n/**表头问号图标调整 */\n.el-table th div {\n  line-height: 33px;\n}\n.el-table /deep/ .is-leaf {\n  padding: 0px !important;\n}\n/**编辑框宽度 */\n.el-input {\n  width: 200px;\n}\n/**编辑框错误提示 */\n.prompt /deep/ .el-input__inner {\n  border-color: red;\n}\n\n/** 表格 透明⬇⬇⬇*/\n.el-table {\n  background: rgba(0, 0, 0, 0);\n}\n/** 表格行高 */\n.el-table /deep/ .el-popover__reference {\n  padding: 0px;\n}\n/** 表格滚动条 */\n.el-table /deep/ .el-table__header-wrapper .gutter {\n  background: rgba(0, 0, 0, 0);\n}\n.el-table /deep/ .el-table__body-wrapper::-webkit-scrollbar {\n  width: 7px;\n}\n.el-table /deep/ .el-table__body-wrapper::-webkit-scrollbar-thumb {\n  background: #77777751;\n  border-radius: 4px;\n}\n/** 表格 透明⬆⬆⬆*/\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Table.vue?vue&type=template&id=394f7f60&scoped=true&\"\nimport script from \"./Table.vue?vue&type=script&lang=js&\"\nexport * from \"./Table.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Table.vue?vue&type=style&index=0&id=394f7f60&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"394f7f60\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}