(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd1a65f4"],{"0d03":function(e,t,r){var n=r("6eeb"),a=Date.prototype,o="Invalid Date",i="toString",s=a[i],u=a.getTime;new Date(NaN)+""!=o&&n(a,i,(function(){var e=u.call(this);return e===e?s.call(this):o}))},"21a2":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"法官姓名",prop:"name"}},[r("el-input",{attrs:{disabled:e.success},on:{focus:e.clear},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"法官职务",prop:"position"}},[r("el-input",{attrs:{disabled:e.success},model:{value:e.ruleForm.position,callback:function(t){e.$set(e.ruleForm,"position",t)},expression:"ruleForm.position"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[r("el-input",{attrs:{disabled:e.success},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",e._n(t))},expression:"ruleForm.tel"}})],1),r("el-form-item",{attrs:{label:"办公室",prop:"office"}},[r("el-input",{attrs:{disabled:e.success},model:{value:e.ruleForm.office,callback:function(t){e.$set(e.ruleForm,"office",t)},expression:"ruleForm.office"}})],1),r("el-form-item",{attrs:{label:"分案比例",prop:"proportion"}},[r("div",{staticStyle:{display:"flex"}},[r("el-input-number",{attrs:{disabled:e.success,min:1,max:10},model:{value:e.ruleForm.proportion,callback:function(t){e.$set(e.ruleForm,"proportion",e._n(t))},expression:"ruleForm.proportion"}})],1)]),e._l(e.ruleForm.teams,(function(t,n){return r("div",{key:n,staticStyle:{display:"flex"}},[r("el-form-item",{attrs:{label:"办案团队["+(n+1)+"]",prop:"team"+n}},[r("el-input",{attrs:{placeholder:"初始办案数量",disabled:e.success},model:{value:t.numberOfCasesHandled[(new Date).getMonth()],callback:function(r){e.$set(t.numberOfCasesHandled,(new Date).getMonth(),e._n(r))},expression:"team.numberOfCasesHandled[new Date().getMonth()]"}},[r("el-select",{attrs:{slot:"prepend",placeholder:"请选择办案团队",disabled:e.success},on:{"visible-change":e.autoRemoveSelectedTeam},slot:"prepend",model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"team.name"}},e._l(e.storeTeams,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e.name}})})),1)],1)],1),r("i",{staticStyle:{"margin-left":"10px"}},[0!==n?r("el-button",{on:{click:function(t){return t.preventDefault(),e.removeTeam(n)}}},[e._v("删除")]):e._e(),0===n?r("el-button",{attrs:{disabled:e.success},on:{click:function(t){return t.preventDefault(),e.addTeam()}}},[e._v("添加")]):e._e()],1)],1)}))],2),r("div",{staticClass:"end"},[e.success?r("el-button",{attrs:{type:"success"}},[e._v("✨法官添加成功✨")]):e._e(),e.success?r("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("继续添加")]):e._e(),r("el-button",{attrs:{plain:""}},[e._v("取消返回")]),e.success?e._e():r("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置表单")]),e.success?e._e():r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即提交")])],1)],1)},a=[],o=(r("a4d3"),r("4de4"),r("4160"),r("a434"),r("0d03"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("e25e"),r("25f0"),r("159b"),r("96cf"),r("89ba")),i=r("2fa7"),s=r("2f62"),u=r("6e15"),l=r.n(u),c=r("911a"),f=r.n(c);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={_id:"",name:"",numberOfCasesHandled:[null,null,null,null,null,null,null,null,null,null,null,null]},b={name:"Add",data:function(){var e=this,t=function(t,r,n){console.log(!e.nameError),e.nameError&&n(new Error(e.nameError)),r||n(new Error("法官姓名必须填写")),(r.length<2||r.length>8)&&n(new Error("法官姓名长度至少2个字符，最大8个字符")),n()},r=function(t,r,n){var a=r?r.toString():0;11!==a.length?n(new Error("电话号码长度有误")):(""===e.ruleForm.tel&&e.$refs.ruleForm.validateField("checkPass"),n())},n=function(t,r,n){var a=parseInt(t.field.charAt(t.field.length-1)),o=!0,i="",s=e.ruleForm.teams[a].numberOfCasesHandled[(new Date).getMonth()];""===e.ruleForm.teams[a].name&&(i="团队不能为空"),("number"!==typeof s||isNaN(s))&&(i&&(i+="    "),i+=" 初始办案数量必须填写且必须为数字值"),i&&(n(new Error(i)),o=!1),o&&n()};return{success:!1,nameError:"",storeTeams:[],ruleForm:{name:"闰土",position:"渔民",tel:17786867754,office:"鱼篷",proportion:1,teams:[l()(d)],avatar:""},rules:{name:[{required:!0,validator:t,trigger:"blur"}],position:[{required:!0,message:"请输入法官职务",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],tel:[{required:!0,validator:r,trigger:"blur"}],office:[{required:!0,message:"请输入办公室",trigger:"blur"}],proportion:[{required:!0,message:"请输入分案比例"},{type:"number",message:"分案比例必须位数字"}],team0:[{required:!0,validator:n}]}}},computed:p({},Object(s["c"])(["teams"])),created:function(){var e=this;this.storeTeams=l()(this.teams),f.a.subscribe("avatar",(function(t,r){var n=r.avatarURL;e.ruleForm.avatar=n}))},watch:{"ruleForm.teams":{handler:function(e){var t=this;e.forEach((function(e,r){var n=t.storeTeams.filter((function(t){return e.name===t.name}));n[0]&&(e._id=n[0]._id)}))},deep:!0}},methods:p({},Object(s["b"])(["judge/addJudge"]),{addTeam:function(){var e=this.ruleForm.teams.length;e<4&&(this.ruleForm.teams.push(l()(d)),this.rules["team".concat(e)]=this.rules.team0)},removeTeam:function(e){this.ruleForm.teams.length>1&&this.ruleForm.teams.splice(e,1)},autoRemoveSelectedTeam:function(){var e=this;this.storeTeams=this.teams.filter((function(t){var r=!0;return e.ruleForm.teams.forEach((function(e){e.name===t.name&&(r=!1)})),r}))},submitForm:function(e){var t=this;this.nameError="",f.a.publish("validate",this.ruleForm.avatar),this.$refs[e].validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n||!t.ruleForm.avatar){r.next=14;break}return r.prev=1,r.next=4,t["judge/addJudge"](t.ruleForm);case 4:t.success=!0,f.a.publish("success"),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](1),t.nameError=r.t0.message,t.$refs[e].validate((function(){}));case 12:r.next=16;break;case 14:return console.log("error submit!!"),r.abrupt("return",!1);case 16:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}())},resetForm:function(e){f.a.publish("resetform"),this.success=!1,this.ruleForm.teams=[l()(d)],this.ruleForm.avatar="",this.$refs[e].resetFields()},clear:function(){this.nameError=""}})},v=b,h=(r("54e8"),r("2877")),g=Object(h["a"])(v,n,a,!1,null,"455130a4",null);t["default"]=g.exports},"25f0":function(e,t,r){"use strict";var n=r("6eeb"),a=r("825a"),o=r("d039"),i=r("ad6d"),s="toString",u=RegExp.prototype,l=u[s],c=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(c||f)&&n(RegExp.prototype,s,(function(){var e=a(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in u)?i.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},"2a36":function(e,t,r){},"54e8":function(e,t,r){"use strict";var n=r("2a36"),a=r.n(n);a.a},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"6e15":function(e,t,r){(function(t,r,n){e.exports=n()})(0,0,(function(){return function(t){if(/number|string|boolean/.test(typeof t))return t;if(t instanceof Date)return new Date(t.getTime());var r=t instanceof Array?[]:{};return n(t,r),r;function n(t,r){for(var a in t){var o=t[a];if(o instanceof Date){var i=new Date(o.getTime());e(r,a,i)}else if(o instanceof Function){i=o;e(r,a,i)}else if(o instanceof Array){i=[];var s=e(r,a,i);n(o,s)}else if(o instanceof Object){i={},s=e(r,a,i);n(o,s)}else{i=o;e(r,a,i)}}}};function e(e,t,r){return e instanceof Array?(e.push(r),e[e.length-1]):e instanceof Object?(e[t]=r,e[t]):void 0}}))},"911a":function(e,t,r){(function(e){(function(r,n){"use strict";var a={};r.PubSub=a;var o=r.define;n(a),"function"===typeof o&&o.amd?o((function(){return a})):(void 0!==e&&e.exports&&(t=e.exports=a),t.PubSub=a,e.exports=t=a)})("object"===typeof window&&window||this,(function(e){"use strict";var t={},r=-1;function n(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function a(e){return function(){throw e}}function o(e,t,r){try{e(t,r)}catch(n){setTimeout(a(n),0)}}function i(e,t,r){e(t,r)}function s(e,r,n,a){var s,u=t[r],l=a?i:o;if(t.hasOwnProperty(r))for(s in u)u.hasOwnProperty(s)&&l(u[s],e,n)}function u(e,t,r){return function(){var n=String(e),a=n.lastIndexOf(".");s(e,e,t,r);while(-1!==a)n=n.substr(0,a),a=n.lastIndexOf("."),s(e,n,t,r)}}function l(e){var r=String(e),a=Boolean(t.hasOwnProperty(r)&&n(t[r])),o=r.lastIndexOf(".");while(!a&&-1!==o)r=r.substr(0,o),o=r.lastIndexOf("."),a=Boolean(t.hasOwnProperty(r)&&n(t[r]));return a}function c(e,t,r,n){e="symbol"===typeof e?e.toString():e;var a=u(e,t,n),o=l(e);return!!o&&(!0===r?a():setTimeout(a,0),!0)}e.publish=function(t,r){return c(t,r,!1,e.immediateExceptions)},e.publishSync=function(t,r){return c(t,r,!0,e.immediateExceptions)},e.subscribe=function(e,n){if("function"!==typeof n)return!1;e="symbol"===typeof e?e.toString():e,t.hasOwnProperty(e)||(t[e]={});var a="uid_"+String(++r);return t[e][a]=n,a},e.subscribeOnce=function(t,r){var n=e.subscribe(t,(function(){e.unsubscribe(n),r.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var r;for(r in t)t.hasOwnProperty(r)&&0===r.indexOf(e)&&delete t[r]},e.unsubscribe=function(r){var n,a,o,i=function(e){var r;for(r in t)if(t.hasOwnProperty(r)&&0===r.indexOf(e))return!0;return!1},s="string"===typeof r&&(t.hasOwnProperty(r)||i(r)),u=!s&&"string"===typeof r,l="function"===typeof r,c=!1;if(!s){for(n in t)if(t.hasOwnProperty(n)){if(a=t[n],u&&a[r]){delete a[r],c=r;break}if(l)for(o in a)a.hasOwnProperty(o)&&a[o]===r&&(delete a[o],c=!0)}return c}e.clearSubscriptions(r)}}))}).call(this,r("62e4")(e))},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,u="name";!n||u in o||a(o,u,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})},e25e:function(e,t,r){var n=r("23e7"),a=r("e583");n({global:!0,forced:parseInt!=a},{parseInt:a})},e583:function(e,t,r){var n=r("da84"),a=r("58a8").trim,o=r("5899"),i=n.parseInt,s=/^[+-]?0[Xx]/,u=8!==i(o+"08")||22!==i(o+"0x16");e.exports=u?function(e,t){var r=a(String(e));return i(r,t>>>0||(s.test(r)?16:10))}:i}}]);
//# sourceMappingURL=chunk-dd1a65f4.3f1e060c.js.map