(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-921e2a58"],{"15c1":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{attrs:{"row-style":{background:"rgba(0, 0, 0, 0)"},"header-row-style":{background:"rgba(0, 0, 0, 0)"},"header-cell-style":{background:"rgba(0, 0, 0, 0)"},data:e.teams,height:e.height}},[n("el-table-column",{attrs:{label:"团队名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{on:{dblclick:function(n){return e.editTeam(t.$index,t.row,n)}}},[e.editIndex+1!==t.$index+1?n("i",{staticClass:"ico icon-tuandui"}):e._e(),e.editIndex+1!==t.$index+1?n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))]):e._e()]),e.editIndex+1===t.$index+1?n("el-input",{class:e.prompt?"prompt":"",attrs:{size:"mini","prefix-icon":"ico icon-tuandui",placeholder:t.row.name},on:{focus:function(n){return e.clearDuplicate(t.row.name)}},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.updateTeam(t.$index,t.row,n)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}):e._e()]}}])}),n("el-table-column",{attrs:{label:"团队成员"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[e._v("姓名: "+e._s(t.row.name))]),n("p",[e._v("住址: "+e._s(t.row.member))]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.members))])],1)])]}}])}),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[n("i",{staticClass:"el-icon-finished"})]},proxy:!0},{key:"default",fn:function(t){return[e.editIndex+1!==t.$index+1?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.editTeam(t.$index,t.row,n)}}},[e._v("编辑")]):e._e(),e.editIndex+1!==t.$index+1?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteTeam(t.$index,t.row)}}},[e._v("删除")]):e._e(),e.editIndex+1===t.$index+1?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.updateTeam(t.$index,t.row,n)}}},[e._v("保存")]):e._e(),e.editIndex+1===t.$index+1?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.cancel(t.$index,t.row)}}},[e._v("取消")]):e._e()]}}])})],1)],1)},r=[],a=(n("a4d3"),n("4de4"),n("4160"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("96cf"),n("89ba")),c=n("2fa7"),o=n("2f62"),s=n("6e15"),u=n.n(s),d=n("7a3e");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"Table",mixins:[d["a"]],data:function(){return{subHeight:407,editIndex:void 0,prompt:!1,name:"",duplicate:""}},computed:f({},Object(o["c"])(["teams"]),{text:{get:function(){return this.duplicate?this.duplicate:this.name},set:function(e){this.name=e}}}),mounted:function(){var e=this;this.$nextTick((function(){document.addEventListener("click",e.cancel)}))},beforeDestroy:function(){document.removeEventListener("click",this.cancel)},methods:f({},Object(o["b"])(["team/deleteTeam","team/updateTeam"]),{editTeam:function(e,t,n){n.stopPropagation(),this.editIndex=e,this.name=""},deleteTeam:function(e,t){var n={_id:t._id};this["team/deleteTeam"]({_id:n,index:e})},updateTeam:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,i){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.stopPropagation(),""!==this.name){e.next=4;break}return this.editIndex=void 0,e.abrupt("return");case 4:if(!this.duplicate){e.next=6;break}return e.abrupt("return");case 6:return r=u()(n),r.name=this.name,e.prev=8,e.next=11,this["team/updateTeam"]({team:r,index:t});case 11:a=e.sent,a.data&&(this.editIndex=void 0),e.next=20;break;case 15:e.prev=15,e.t0=e["catch"](8),console.log(e.t0),this.prompt=!0,this.duplicate=e.t0.message;case 20:case"end":return e.stop()}}),e,this,[[8,15]])})));function t(t,n,i){return e.apply(this,arguments)}return t}(),clearDuplicate:function(e){this.duplicate="",this.text=e,this.prompt=!1},cancel:function(e){e.target&&"el-input__inner"===e.target.className||(this.editIndex=void 0,this.duplicate="",this.prompt=!1)}})},m=p,h=(n("4ab8"),n("2877")),b=Object(h["a"])(m,i,r,!1,null,"5997cd9b",null);t["default"]=b.exports},"4ab8":function(e,t,n){"use strict";var i=n("addd"),r=n.n(i);r.a},"6e15":function(e,t,n){(function(t,n,i){e.exports=i()})(0,0,(function(){return function(t){if(/number|string|boolean/.test(typeof t))return t;if(t instanceof Date)return new Date(t.getTime());var n=t instanceof Array?[]:{};return i(t,n),n;function i(t,n){for(var r in t){var a=t[r];if(a instanceof Date){var c=new Date(a.getTime());e(n,r,c)}else if(a instanceof Function){c=a;e(n,r,c)}else if(a instanceof Array){c=[];var o=e(n,r,c);i(a,o)}else if(a instanceof Object){c={},o=e(n,r,c);i(a,o)}else{c=a;e(n,r,c)}}}};function e(e,t,n){return e instanceof Array?(e.push(n),e[e.length-1]):e instanceof Object?(e[t]=n,e[t]):void 0}}))},"7a3e":function(e,t,n){"use strict";t["a"]={data:function(){return{height:0,screenHeight:window.innerHeight}},created:function(){var e=this;this.height=window.innerHeight-this.subHeight,window.addEventListener("resize",(function(){return function(){e.screenHeight=window.innerHeight}()}))},watch:{screenHeight:function(e){this.height=e-this.subHeight}}}},addd:function(e,t,n){},b0c0:function(e,t,n){var i=n("83ab"),r=n("9bf2").f,a=Function.prototype,c=a.toString,o=/^\s*function ([^ (]*)/,s="name";!i||s in a||r(a,s,{configurable:!0,get:function(){try{return c.call(this).match(o)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-921e2a58.90462655.js.map